<!DOCTYPE html>
<html lang="es">

<head>
  <!-- 1. Metadatos esenciales -->
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- 2. SEO básico -->
  <title>Audio Plus</title>
  <meta 
    name="description" 
    content="Audio Plus, manten el orden en tu aula de una forma innovadora y práctica con nuestro prototipo" 
  />
  <meta name="keywords" content="Audio Plus, organizador, aula, innovador, práctico, prototipo" /> 

  <!-- Mejora performance -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- Google Fonts: Onest + Poppins -->
  <link href="https://fonts.googleapis.com/css2?family=Onest:wght@100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <!-- Favicons -->
  <link rel="icon" href="./img/Icono_blanco.svg" type="image/png" />

  <!-- CSS local -->
  <link rel="stylesheet" href="./css/fuentes.css" />
  <link rel="stylesheet" href="./css/estilo.css" />
  <link rel="stylesheet" href="./css/iconos.css" />

  <!-- JSON-LD para Google -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "audiop",
    "url": "https://jhojanomb.github.io/audiop/",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://jhojanomb.github.io/audiop/?s={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
  </script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "audiop",
    "url": "https://jhojanomb.github.io/audiop/",
    "logo": "https://jhojanomb.github.io/audiop/img/logo.png",
    "sameAs": [
      "https://github.com/jhojanomb",
      "https://linkedin.com/in/jhojanomb"
    ]
  }
  </script>

  <!-- CSS de terceros -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" />

  <!-- Frameworks de utilidad -->
  <script src="https://cdn.tailwindcss.com" defer></script>

  <!-- Scripts locales: carga dinámica -->
  <script src="./js/contacto.js" defer></script>
  <script src="./js/carga.js" defer></script>
  <script src="/js/top.js" defer></script>

  <!-- Librerías que necesitan inicializarse pronto -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js" defer></script>
</head>

<body class="bg-gray-50 text-gray-800">

  <!-- Navbar -->
  <nav class="sticky top-0 z-50 bg-gradient-to-r from-black to-gray-900 shadow-lg text-white">
    <div class="max-w-7xl mx-auto relative flex items-center justify-between px-6 py-4">
      <!-- Logo -->
      <a class="flex items-center space-x-3 z-10" href="#" data-url="paginas/inicio.html">
        <img src="./img/Icono_blanco.svg" alt="audiop Logo" class="w-20 h-auto" />
      </a>

      <!-- Enlaces de escritorio centrados -->
      <ul class="hidden lg:flex absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 space-x-8">
        <li class="relative group">
          <a class="text-white hover:text-gray-300 transition nav-link" href="#" data-url="paginas/inicio.html">Inicio</a>
          <span class="absolute left-0 -bottom-1 h-0.5 w-0 bg-yellow-400 transition-all duration-300 group-hover:w-full"></span>
        </li>

        <li class="relative group">
          <a class="text-white hover:text-gray-300 transition nav-link" href="#" data-url="paginas/contacto.html">Contactanos</a>
          <span class="absolute left-0 -bottom-1 h-0.5 w-0 bg-yellow-400 transition-all duration-300 group-hover:w-full"></span>
        </li>

        <li class="relative group">
          <a class="text-white hover:text-gray-300 transition nav-link" href="#" data-url="paginas/descargar.html">Descargar</a>
          <span class="absolute left-0 -bottom-1 h-0.5 w-0 bg-yellow-400 transition-all duration-300 group-hover:w-full"></span>
        </li>
      </ul>

      <!-- Botón móvil -->
      <button id="menu-btn" class="lg:hidden p-2 text-white focus:outline-none z-10" aria-label="Abrir menú">
        <i class="fas fa-bars text-2xl"></i>
      </button>
    </div>

    <!-- Drawer lateral móvil -->
    <div 
      id="mobile-menu" 
      class="fixed inset-0 bg-black bg-opacity-75 transform -translate-x-full transition-transform lg:hidden z-40"
      aria-hidden="true"
    >
      <div class="absolute top-0 left-0 w-64 h-full bg-gradient-to-r from-black to-gray-900 shadow-lg text-white p-6">
        <div class="flex items-center justify-between mb-10">
          <span class="text-2xl font-bold text-white">Menú</span>
          <button id="menu-close" class="p-2 text-white focus:outline-none" aria-label="Cerrar menú">
            <i class="fas fa-times text-2xl"></i>
          </button>
        </div>
        <ul class="flex flex-col space-y-6">
          <li><a href="#" class="text-white text-xl hover:text-gray-300 transition drawer-link" data-url="paginas/inicio.html">Inicio</a></li>

          <li><a href="#" class="text-white text-xl hover:text-gray-300 transition drawer-link" data-url="paginas/contacto.html">Contactanos</a></li>
          
          <li><a href="#" class="text-white text-xl hover:text-gray-300 transition drawer-link" data-url="paginas/descargar.html">Descargar</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Contenido dinámico -->
  <main id="content" class="font-custom bg-gradient-to-br from-gray-500 via-zinc-200 to-orange-200" tabindex="-1"></main>

  <!-- Botón Volver Arriba -->
  <button id="back-to-top"
          aria-label="Volver al inicio"
          class="fixed bottom-6 right-6 p-4 w-14 h-14 rounded-full bg-black text-white btn-neumorph">
    <i class="fas fa-arrow-up"></i>
  </button>
  
  <!-- Lenis (smooth scroll) -->
  <script src="https://cdn.jsdelivr.net/npm/@studio-freight/lenis@latest/bundled/lenis.min.js"></script>
  <script>
    const lenis = new Lenis({
      duration: 1.2,
      smooth: true
    });

    function raf(time) {
      lenis.raf(time)
      requestAnimationFrame(raf)
    }
    requestAnimationFrame(raf)
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
  <script>AOS.init({duration:800,once:true});</script>
  <script>new WOW({boxClass:'wow',animateClass:'animate__animated',offset:100,mobile:true,live:true}).init();</script>

  <!-- SCRIPT: controlador robusto del menú y delegación de enlaces -->
  <script>
  (function () {
    document.addEventListener('DOMContentLoaded', () => {
      const menuBtn   = document.getElementById('menu-btn');
      const mobileNav = document.getElementById('mobile-menu');
      const closeBtn  = document.getElementById('menu-close');
      const drawerLinks = document.querySelectorAll('.drawer-link');
      const navLinks = document.querySelectorAll('.nav-link, a[data-url]'); // incluye logo link
      const MOBILE_BREAKPOINT = 1024; // tailwind lg breakpoint

      if (!menuBtn || !mobileNav || !closeBtn) return;

      // Accesibilidad
      menuBtn.setAttribute('aria-expanded', 'false');
      menuBtn.setAttribute('aria-controls', 'mobile-menu');
      mobileNav.setAttribute('aria-hidden', 'true');

      // Debounce simple
      let lastToggle = 0;
      const TOGGLE_DEBOUNCE_MS = 200;

      const isMobileView = () => window.innerWidth < MOBILE_BREAKPOINT;

      function openMenu() {
        if (!isMobileView()) return;
        mobileNav.classList.remove('-translate-x-full');
        document.body.classList.add('overflow-hidden');
        menuBtn.setAttribute('aria-expanded', 'true');
        mobileNav.setAttribute('aria-hidden', 'false');
      }
      function closeMenu() {
        mobileNav.classList.add('-translate-x-full');
        document.body.classList.remove('overflow-hidden');
        menuBtn.setAttribute('aria-expanded', 'false');
        mobileNav.setAttribute('aria-hidden', 'true');
      }
      function toggleMenu() {
        const now = Date.now();
        if (now - lastToggle < TOGGLE_DEBOUNCE_MS) return;
        lastToggle = now;
        if (mobileNav.classList.contains('-translate-x-full')) openMenu(); else closeMenu();
      }

      // Botones
      menuBtn.addEventListener('click', (e) => { e.stopPropagation(); toggleMenu(); });
      closeBtn.addEventListener('click', (e) => { e.stopPropagation(); closeMenu(); });

      // Cerrar al tocar el overlay (clic fuera del panel)
      mobileNav.addEventListener('click', (e) => { if (e.target === mobileNav) closeMenu(); });

      // Cerrar con ESC
      document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeMenu(); });

      // Cerrar si cambias a escritorio
      window.addEventListener('resize', () => { if (!isMobileView()) closeMenu(); });

      // Delegación de enlaces dentro del drawer (usar data-url)
      drawerLinks.forEach(link => {
        link.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          const url = link.dataset.url;
          if (url && typeof cargarContenido === 'function') {
            cargarContenido(url);
          }
          // Cerrar ligero tras iniciar la carga
          setTimeout(() => closeMenu(), 80);
        });
      });

      // Delegación para enlaces del nav de escritorio/logo
      navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
          const url = link.dataset.url;
          if (!url) return;
          e.preventDefault();
          if (typeof cargarContenido === 'function') {
            cargarContenido(url);
          }
        });
      });

      // Evita que llamadas globales abran la drawer accidentalmente
      window.toggleDrawer = function() {
        // Stub: solo registro para debugging y evitar comportamiento inesperado
        console.warn('toggleDrawer() llamada — stub activo. Reemplaza llamadas inline por data-url o usa API del menú.');
        // Si quieres permitir llamadas globales, reemplaza la línea anterior por:
        // toggleMenu();
      };

      // Si el contenido dinámico crea enlaces nuevos, observa el panel y atacha listeners
      const observer = new MutationObserver((mutations) => {
        // re-attach drawer links si cambian
        const newDrawerLinks = mobileNav.querySelectorAll('.drawer-link');
        newDrawerLinks.forEach(dl => {
          if (!dl.dataset.__bound) {
            dl.dataset.__bound = '1';
            dl.addEventListener('click', (e) => {
              e.preventDefault();
              const url = dl.dataset.url;
              if (url && typeof cargarContenido === 'function') cargarContenido(url);
              setTimeout(() => closeMenu(), 80);
            });
          }
        });
      });
      observer.observe(mobileNav, { childList: true, subtree: true });
    });
  })();
  </script>

</body>

</html>
